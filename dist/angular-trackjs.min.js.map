{"version":3,"sources":["angular-trackjs.min.js","angular-trackjs.js"],"names":[],"mappings":"AAAA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AALA,AAMA;AALA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"angular-trackjs.min.js","sourceRoot":"/source/","sourcesContent":["/*! Angular TrackJs v0.1.0 © 2015 Jamie Le Souef <jamielesouef@gmail.com> */\n!function(r){\"use strict\";r.module(\"trackJs\",[]);var n=function(r){return function(n){n&&r.trackJs&&r.trackJs.configure(n)}};r.module(\"trackJs\").config([\"$provide\",function(r){r.decorator(\"$exceptionHandler\",[\"$delegate\",\"exceptionHandlerDecorator\",function(r,n){return n.decorate(r)}])}]),r.module(\"trackJs\").factory(\"exceptionHandlerDecorator\",[\"$window\",function(r){var n=function(n){return function(t,e){r.trackJs&&r.trackJs.track(t),n(t,e)}};return{decorate:n}}]),r.module(\"trackJs\").factory(\"trackJs\",[\"$window\",function(r){var t=[],e=function(n){r.trackJs.track(n)},o=function(r){t=t.concat(r);var n=function(r){var n=function(r,n){return r instanceof RegExp?r.test(n):r===n},e=function(t,e){return r.network.map(function(r){return n(t,r[e])}).some(function(r){return n(r,!0)})},o=function(t){var o=[];for(var c in t){var u=t[c];o.push(\"pageUrl\"===c?n(u,r.url):\"message\"===c?n(t.message,r.message):e(u,c))}return o=o.every(function(r){return n(r,!0)})};return!t.map(o).some(function(r){return n(r,!0)})};this.configure({onError:n})};return{track:e,ignore:o,configure:n(r)}}]),r.module(\"trackJs\").provider(\"TrackJs\",function(){this.configure=n(window),this.$get=r.noop})}(angular);\n//# sourceMappingURL=/angular-trackjs.min.js.map","/*!\n * Angular TrackJs v0.1.0\n *\n * © 2016, Jamie Le Souef <jamielesouef@gmail.com>\n */\n\n(function (angular) {\n\n    'use strict';\n\n    angular.module('trackJs', []);\n\n    var configure = function (windowObj) {\n        return function (options) {\n\n            if (options && windowObj.trackJs) {\n                windowObj.trackJs.configure(options);\n            }\n        };\n    };\n\n    angular.module('trackJs').config([\"$provide\", function ($provide) {\n        $provide.decorator(\"$exceptionHandler\", [\"$delegate\", \"exceptionHandlerDecorator\", function ($delegate, exceptionHandlerDecorator) {\n            return exceptionHandlerDecorator.decorate($delegate);\n        }]);\n    }]);\n\n    angular.module('trackJs').factory('exceptionHandlerDecorator', [\"$window\", function ($window) {\n        var decorate = function ($delegate) {\n            return function (exception, cause) {\n                if ($window.trackJs) {\n                    $window.trackJs.track(exception);\n                }\n\n                $delegate(exception, cause);\n            };\n        };\n\n        return {\n            decorate: decorate\n        };\n    }]);\n\n    angular.module('trackJs').factory('trackJs', [\"$window\", function ($window) {\n\n        var ignoreErrorList = [];\n\n        var track = function (message) {\n            $window.trackJs.track(message);\n        };\n\n        var onError = function (payload) {\n\n            var test = function (what, where) {\n                return (what instanceof RegExp) ? what.test(where) : what === where;\n            };\n\n            var checkNetwork = function (expectedValue, networkProperty) {\n                return payload.network\n                    .map(function (request) {\n                        return test(expectedValue, request[networkProperty]);\n                    })\n                    .some(function (error) {\n                        return test(error, true);\n                    });\n            };\n\n            var validateError = function (errorCheck) {\n\n                var errorMatch = [];\n\n                for (var property in errorCheck) {\n                    var expectedValue = errorCheck[property];\n\n                    if (property === 'pageUrl') {\n                        errorMatch.push(test(expectedValue, payload.url));\n                    } else if (property === 'message') {\n                        errorMatch.push(test(errorCheck.message, payload.message));\n                    } else {\n                        errorMatch.push(checkNetwork(expectedValue, property));\n                    }\n                }\n\n                errorMatch = errorMatch.every(function (error) {\n                    return test(error, true);\n                });\n\n                return errorMatch;\n            };\n\n            return !ignoreErrorList.map(validateError).some(function (error) {\n                return test(error, true);\n            });\n        };\n\n        var ignore = function (list) {\n            ignoreErrorList = ignoreErrorList.concat(list);\n\n            this.configure({\n                onError: onError\n            });\n        };\n\n        return {\n            track: track,\n            ignore: ignore,\n            configure: configure($window),\n            onError: onError\n        };\n    }]);\n\n    angular.module('trackJs').provider('TrackJs', function () {\n        this.configure = configure(window);\n        this.$get = angular.noop;\n    });\n\n})\n(angular);\n"]}